
## "QUICK" INSTALL UBUNTU:
``` bash
sudo apt update && sudo apt upgrade -y
sudo apt install -y build-essential gcc cmake git curl
# Remove any existing Go installation
sudo apt remove -y golang-go && sudo rm -rf /usr/local/go
# Download the latest Go version (check go.dev/dl for the absolute latest)
wget https://go.dev/dl/go1.23.4.linux-amd64.tar.gz
# Install it to /usr/local
sudo tar -C /usr/local -xzf go1.23.4.linux-amd64.tar.gz
# Add Go to your PATH (add this to ~/.bashrc to make it permanent)
echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc
echo 'export PATH=$PATH:$(go env GOPATH)/bin' >> ~/.bashrc
source ~/.bashrc
# Verify installation
go version

# BEGIN: NVIDIA
wget https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/cuda-wsl-ubuntu.pin
sudo mv cuda-wsl-ubuntu.pin /etc/apt/preferences.d/cuda-repository-pin-600
wget https://developer.download.nvidia.com/compute/cuda/12.6.3/local_installers/cuda-repo-wsl-ubuntu-12-6-local_12.6.3-1_amd64.deb
sudo dpkg -i cuda-repo-wsl-ubuntu-12-6-local_12.6.3-1_amd64.deb
sudo cp /var/cuda-repo-wsl-ubuntu-12-6-local/cuda-*-keyring.gpg /usr/share/keyrings/
sudo apt-get update
sudo apt-get install -y cuda-toolkit-12-6

echo 'export PATH=$PATH:/usr/local/cuda/bin' >> ~/.bashrc
echo 'export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/lib64' >> ~/.bashrc
source ~/.bashrc
# END: NVIDIA

git clone https://github.com/g023/g023_ollama.git
cd g023_ollama

cmake -B build
cmake --build build

go build .

# now you have an ollama executable

# now lets make it run on startup

# /path/to/your/cloned/ollama/ (for your ollama.service ExecStart)
echo "$(pwd)/ollama"
sudo nano /etc/systemd/system/ollama.service
```

``` ini
[Unit]
Description=Ollama Service (Custom Build)
After=network-online.target

[Service]
ExecStart=/path/to/your/cloned/ollama/ollama serve
User=youruser
Group=youruser
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
```

``` bash
# Reload the systemd daemon to make it aware of the new ollama.service file
sudo systemctl daemon-reload
# Enable the service so that it automatically starts when you boot up
sudo systemctl enable ollama
# Start the service for the first time
sudo systemctl start ollama
# done
```

``` bash
# more commands...
# restart
sudo systemctl restart ollama
# check status
sudo systemctl status ollama
# stop
sudo systemctl stop ollama
# view detailed logs
sudo journalctl -u ollama -f
```

If you want to open up to LAN (**caution** as this can open it to the internet)
``` ini
[Unit]
Description=Ollama Service (Custom Build)
After=network-online.target

[Service]
ExecStart=/path/to/your/cloned/ollama/ollama serve
User=youruser
Group=youruser
Restart=always
RestartSec=3
Environment="OLLAMA_HOST=0.0.0.0"

[Install]
WantedBy=multi-user.target
```
if changing the service, restart it
``` bash
sudo systemctl daemon-reload
sudo systemctl restart ollama
```

WSL port forwarding if you have issues communicating from host machine
``` bash
hostname -I | awk '{print $1}'
```
Copy the IP address that is displayed (e.g., 172.21.146.13) and then launch powershell (replace the ip in connectaddress)
``` powershell
netsh interface portproxy add v4tov4 listenport=11434 listenaddress=0.0.0.0 connectport=11434 connectaddress=172.21.146.13
New-NetFirewallRule -DisplayName "Ollama WSL" -Direction Inbound -Protocol TCP -LocalPort 11434 -Action Allow
```

to remove the firewall rule in the future:
``` powershell
Remove-NetFirewallRule -DisplayName "Ollama WSL"
netsh interface portproxy delete v4tov4 listenport=11434 listenaddress=0.0.0.0
```